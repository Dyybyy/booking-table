<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Responsive Contact Us Page Design using Html CSS</title>
   <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap">
   <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css">
   <link rel="stylesheet" href="css/style.css">
   <link rel="stylesheet" href="index.css">

   <style>
       /* Modal styles */
       .modal {
           display: none;
           position: fixed;
           z-index: 1;
           left: 0;
           top: 0;
           width: 100%;
           height: 100%;
           overflow: auto;
           background-color: rgb(0, 0, 0);
           background-color: rgba(0, 0, 0, 0.4);
           padding-top: 60px;
       }
       .modal-content {
           background-color: #fefefe;
           margin: 5% auto;
           padding: 20px;
           border: 1px solid #888;
           width: 80%;
           max-width: 500px;
           text-align: center;
           border-radius: 10px;
       }
       .close {
           color: #aaa;
           float: right;
           font-size: 28px;
           font-weight: bold;
       }
       .close:hover,
       .close:focus {
           color: black;
           text-decoration: none;
           cursor: pointer;
       }
       .success-message {
           color: green;
           font-size: 20px;
           margin-top: 20px;
       }
   </style>
</head>
<body>
   <section id="section-wrapper">
       <div class="box-wrapper">
           <div class="info-wrap">
               <h2 class="info-title">Contact Information</h2>
               <h3 class="info-sub-title">Welcome to Net Cafe, where culinary excellence meets warm hospitality. We invite you to indulge in a memorable dining experience.</h3>
               <ul class="info-details">
                   <li>
                       <i class="fas fa-phone-alt"></i>
                       <span>Phone:</span> <a href="tel:07708920909">07708920909</a>
                   </li>
                   <li>
                       <i class="fas fa-paper-plane"></i>
                       <span>Email:</span> <a href="mailto:netcafe@gmail.com">netcafe@gmail.com</a>
                   </li>
               </ul>
               <ul class="social-icons">
                   <li><a href="https://www.facebook.com/amnasurakanetcafe/"><i class="fab fa-facebook"></i></a></li>
                   <li><a href="https://www.instagram.com/net_cafe.amna_suraka/"><i class="fab fa-instagram"></i></a></li>
               </ul>
           </div>
           <div class="form-wrap">
               <form id="contact-form" action="#" method="POST">
                   <h2 class="form-title">Send us a message</h2>
                   <div class="form-fields">
                       <div class="form-group">
                           <input type="text" id="first_name" name="first_name" class="form-control" placeholder="First Name" required>
                       </div>
                       <div class="form-group">
                           <input type="text" id="last_name" name="last_name" class="form-control" placeholder="Last Name" required>
                       </div>
                       <div class="form-group">
                           <input type="email" id="email" name="email" class="form-control" placeholder="Mail" required>
                       </div>
                       <div class="form-group">
                           <input type="number" id="phone" name="phone" class="form-control" placeholder="Phone" required>
                       </div>
                       <div class="form-group">
                           <input type="number" id="people" name="people" class="form-control" placeholder="How many people?" required>
                       </div>
                       <div class="form-group">
                        <input type="date" id="date" name="date" class="form-control" placeholder="What is the date?" required>
                    </div>
                    
                    <script>
                        // Get current date in yyyy-mm-dd format
                        var today = new Date().toISOString().slice(0, 10);
                    
                        // Set the input field value to current date
                        document.getElementById('date').value = today;
                    </script>
                    
                       <div class="form-group">
                        <input type="time" id="time" name="time" class="form-control" placeholder="What time?" required>
                    </div>
                    
                    <script>
                        // Get current time
                        var currentTime = new Date().toLocaleTimeString('en-US', { hour12: false });
                    
                        // Set the input field value to current time
                        document.getElementById('time').value = currentTime;
                    </script>
                    
                       <div class="form-group">
                           <textarea id="message" name="message" class="form-control" placeholder="Write your message" required></textarea>
                       </div>
                   </div>
                   <input type="submit" value="Send Message" class="submit-button">
               </form>
           </div>
       </div>
   </section>

   <!-- The Modal -->
   <div id="successModal" class="modal">
       <div class="modal-content">
           <span class="close">&times;</span>
           <p class="success-message">Your message has been sent successfully!</p>
       </div>
   </div>

   <script src="https://cdn.emailjs.com/dist/email.min.js"></script>
   <script>
       document.addEventListener('DOMContentLoaded', function () {
           emailjs.init("7BYzg_CUnCpuaxYDm");

           document.getElementById('contact-form').addEventListener('submit', function (event) {
               event.preventDefault(); // Prevent form from submitting normally

               const formData = {
                   first_name: document.getElementById('first_name').value,
                   last_name: document.getElementById('last_name').value,
                   email: document.getElementById('email').value,
                   phone: document.getElementById('phone').value,
                   people: document.getElementById('people').value,
                   date: document.getElementById('date').value,
                   time: document.getElementById('time').value,
                   message: document.getElementById('message').value
               };

               // Save form data to localStorage
               localStorage.setItem('contactFormData', JSON.stringify(formData));

               const serviceID = 'service_yzf0i0q';
               const templateID = 'template_91dte9w';

               emailjs.send(serviceID, templateID, formData)
                   .then(function () {
                       showSuccessModal();
                       document.getElementById('contact-form').reset(); // Clear the form
                   }, function (error) {
                       console.error('Failed to send message:', error);
                       alert('Failed to send message. Please try again.');
                   });
           });

           // Load saved data on page load
           const savedData = JSON.parse(localStorage.getItem('contactFormData'));
           if (savedData) {
               document.getElementById('first_name').value = savedData.first_name || '';
               document.getElementById('last_name').value = savedData.last_name || '';
               document.getElementById('email').value = savedData.email || '';
               document.getElementById('phone').value = savedData.phone || '';
               document.getElementById('people').value = savedData.people || '';
               document.getElementById('date').value = savedData.date || '';
               document.getElementById('time').value = savedData.time || '';
               document.getElementById('message').value = savedData.message || '';
           }

           // Get the modal
           const modal = document.getElementById("successModal");

           // Get the <span> element that closes the modal
           const span = document.getElementsByClassName("close")[0];

           // When the user clicks on <span> (x), close the modal
           span.onclick = function () {
               modal.style.display = "none";
           }

           // When the user clicks anywhere outside of the modal, close it
           window.onclick = function (event) {
               if (event.target == modal) {
                   modal.style.display = "none";
               }
           }

           function showSuccessModal() {
               modal.style.display = "block";
               setTimeout(() => {
                   modal.style.display = "none";
               }, 3000);
           }
       });
   </script>
</body>
</html>
